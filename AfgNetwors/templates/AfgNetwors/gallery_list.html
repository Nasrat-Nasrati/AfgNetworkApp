{% extends 'base.html' %}
{% block title %}Gallery List{% endblock %}

{% block content %}
<div style="max-width: 1200px; margin: auto;">
    <h2 style="text-align: center; margin-bottom: 20px;">Gallery</h2>

    <div style="text-align: right; margin-bottom: 20px;">
        <a href="{% url 'gallery-create' %}" style="
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
        ">+ Upload New Image</a>
    </div>

    <div style="
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
    ">
        {% for item in object_list %}
            <a href="{% url 'gallery-detail' item.pk %}" style="text-decoration: none;">
                <div style="
                    background: white;
                    border-radius: 12px;
                    overflow: hidden;
                    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
                    transition: transform 0.3s ease;
                " onmouseover="this.style.transform='scale(1.03)'" onmouseout="this.style.transform='scale(1)'">
                    <img src="{{ item.image.url }}" alt="Gallery Image" style="
                        width: 100%;
                        height: 200px;
                        object-fit: cover;
                        border-bottom: 3px solid #f0f0f0;
                    ">
                </div>
            </a>
        {% empty %}
            <p style="text-align: center; grid-column: 1 / -1;">No gallery images uploaded yet.</p>
        {% endfor %}
    </div>

    <!-- Pagination Controls -->
    {% if is_paginated %}
    <nav aria-label="Page navigation" style="margin-top: 30px; text-align: center;">
        <ul style="list-style: none; padding: 0; display: inline-flex; gap: 8px;">

            <!-- Previous Page Link -->
            {% if page_obj.has_previous %}
                <li>
                    <a href="?page={{ page_obj.previous_page_number }}" style="
                        padding: 8px 12px;
                        background-color: #4CAF50;
                        color: white;
                        border-radius: 5px;
                        text-decoration: none;
                        font-weight: bold;
                        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
                        transition: background-color 0.3s ease;
                    " onmouseover="this.style.backgroundColor='#45a049'" onmouseout="this.style.backgroundColor='#4CAF50'">
                        ← Prev
                    </a>
                </li>
            {% else %}
                <li>
                    <span style="
                        padding: 8px 12px;
                        background-color: #a5d6a7;
                        color: #eee;
                        border-radius: 5px;
                        font-weight: bold;
                        user-select: none;
                    ">← Prev</span>
                </li>
            {% endif %}

            <!-- Page Numbers -->
            {% for num in paginator.page_range %}
    {% if num == page_obj.number %}
        <li>
            <span style="
                padding: 8px 14px;
                background-color: #388e3c;
                color: white;
                border-radius: 5px;
                font-weight: bold;
                user-select: none;
            ">{{ num }}</span>
        </li>
    {% else %}
        <li>
            <a href="?page={{ num }}" style="
                padding: 8px 14px;
                background-color: #e8f5e9;
                color: #388e3c;
                border-radius: 5px;
                font-weight: bold;
                text-decoration: none;
                box-shadow: 0 1px 3px rgba(0,0,0,0.1);
                transition: background-color 0.3s ease, color 0.3s ease;
            " onmouseover="this.style.backgroundColor='#c8e6c9'; this.style.color='#2e7d32'" onmouseout="this.style.backgroundColor='#e8f5e9'; this.style.color='#388e3c'">
                {{ num }}
            </a>
        </li>
    {% endif %}
{% endfor %}


            <!-- Next Page Link -->
            {% if page_obj.has_next %}
                <li>
                    <a href="?page={{ page_obj.next_page_number }}" style="
                        padding: 8px 12px;
                        background-color: #4CAF50;
                        color: white;
                        border-radius: 5px;
                        text-decoration: none;
                        font-weight: bold;
                        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
                        transition: background-color 0.3s ease;
                    " onmouseover="this.style.backgroundColor='#45a049'" onmouseout="this.style.backgroundColor='#4CAF50'">
                        Next →
                    </a>
                </li>
            {% else %}
                <li>
                    <span style="
                        padding: 8px 12px;
                        background-color: #a5d6a7;
                        color: #eee;
                        border-radius: 5px;
                        font-weight: bold;
                        user-select: none;
                    ">Next →</span>
                </li>
            {% endif %}
        </ul>
    </nav>
    {% endif %}
</div>
{% endblock %}
